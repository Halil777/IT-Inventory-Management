"use client"

import React, { createContext, useContext, useEffect, useMemo, useState } from "react"

type Lang = "en" | "tr" | "tk" | "ru"
type Dict = Record<string, string>

const dictionaries: Record<Lang, Dict> = {
  en: {
    // App
    "app.name": "IT Admin Panel",
    "app.tagline": "Management System",

    // Common
    "common.change_language": "Change language",
    "common.add": "Add",
    "common.edit": "Edit",
    "common.delete": "Delete",
    "common.cancel": "Cancel",
    "common.actions": "Actions",
    "common.id": "ID",
    "common.department": "Department",
    "common.name": "Name",
    "common.export_to_excel": "Export to Excel",
    "common.search": "Search",
    "common.view_details": "View Details",

    // Dashboard
    "dashboard.title": "Dashboard",
    "dashboard.subtitle": "Overview of system metrics",
    "dashboard.stats.total_devices": "Total Devices",
    "dashboard.stats.active_printers": "Active Printers",
    "dashboard.stats.employees": "Employees",
    "dashboard.stats.departments": "Departments",
    "dashboard.stats.consumables": "Consumables",
    "dashboard.stats.alerts": "Alerts",
    "dashboard.stats.from_last_month": "from last month",
    "dashboard.charts.device_usage_title": "Device Usage Trends",
    "dashboard.charts.device_usage_desc": "Monthly device allocation across departments",
    "dashboard.charts.cartridge_usage_title": "Cartridge Usage Statistics",
    "dashboard.charts.cartridge_usage_desc": "Monthly cartridge consumption and refill rates",
    "dashboard.charts.computers": "Computers",
    "dashboard.charts.printers": "Printers",
    "dashboard.charts.monitors": "Monitors",
    "dashboard.charts.used": "Used",
    "dashboard.charts.refilled": "Refilled",
    "dashboard.charts.new": "New",
    "dashboard.notifications.title": "Recent Notifications",
    "dashboard.notifications.subtitle": "Latest system alerts and updates",
    "dashboard.activity.title": "Recent Activity",
    "dashboard.activity.subtitle": "Latest actions performed in the system",
    "dashboard.activity.system": "System",

    // Devices
    "devices.title": "Device Management",
    "devices.subtitle": "Manage computers, monitors, printers, and other IT equipment",
    "devices.add": "Add Device",
    "devices.list_title": "Devices",
    "devices.list_desc": "Manage your organization's IT equipment",
    "devices.search_placeholder": "Search devices...",
    "devices.type": "Type",
    "devices.status": "Status",
    "devices.user": "User",

    // Departments
    "departments.title": "Department Management",
    "departments.subtitle": "Manage organizational departments and their resources",
    "departments.add": "Add Department",
    "departments.list_title": "Departments",
    "departments.list_desc": "Manage your organization's departments",
    "departments.search_placeholder": "Search departments...",
    "departments.form.name_label": "Department Name",
    "departments.form.name_placeholder": "e.g., Information Technology",
    "departments.form.head_label": "Head of Department",
    "departments.form.head_placeholder": "e.g., John Smith",
    "departments.form.description_label": "Description",
    "departments.form.description_placeholder": "Brief description of the department's role and responsibilities",
    "departments.form.created": "Department created",
    "departments.form.updated": "Department updated",
    "departments.form.save_failed": "Failed to save department. Please try again.",
    "departments.back_to_list": "Back to Departments",
    "departments.new.title": "Add New Department",
    "departments.new.description": "Create a new department in your organization",
    "departments.new.info_description": "Enter the details for the new department",
    "departments.edit.title": "Edit Department",
    "departments.edit.description": "Update department information",
    "departments.edit.back": "Back to Department",
    "departments.edit.info_description": "Update the department details",
    "departments.details.title": "Department Details",
    "departments.details.description": "View and manage department information",
    "departments.details.back": "Back to Departments",
    "departments.details.load_failed": "Failed to load department",
    "departments.details.stats_title": "Statistics",
    "departments.details.stats_description": "Coming soon",
    "departments.details.no_stats": "No statistics available for this entity.",
    "departments.info_title": "Department Information",
    "departments.delete_confirm": "Delete this department?",
    "departments.deleted": "Department deleted",
    "departments.delete_failed": "Failed to delete department",
    "departments.export_failed": "Failed to export departments",
    "departments.stats.total_departments": "Total Departments",
    "departments.stats.total_employees": "Total Employees",
    "departments.stats.total_devices": "Total Devices",
    "departments.stats.avg_employees_per_dept": "Avg. Employees/Dept",

    // Employees
    "employees.title": "Employee Management",
    "employees.subtitle": "Manage your organization's employees",
    "employees.add": "Add Employee",
    "employees.list_title": "Employees",
    "employees.list_desc": "Manage your organization's employees",
    "employees.search_placeholder": "Search employees...",
    "employees.role": "Role",

    // Printers
    "printers.title": "Printers & Cartridges",
    "printers.subtitle": "Manage printers and cartridge inventory",
    "printers.add": "Add Printer",
    "printers.list_title": "Printers",
    "printers.list_desc": "Manage printers and their locations",
    "printers.search_placeholder": "Search printers...",
    "printers.model": "Model",

    // Consumables
    "consumables.title": "Consumables",
    "consumables.subtitle": "Manage consumable inventory and assignments",
    "consumables.add": "Add Consumable",

    // Notifications
    "notifications.title": "Notifications",
    "notifications.subtitle": "View system notifications and alerts",

    // Reports
    "reports.title": "Reports",
    "reports.subtitle": "Inventory statistics and summaries",

    // Sidebar
    "sidebar.dashboard": "Dashboard",
    "sidebar.departments": "Departments",
    "sidebar.employees": "Employees",
    "sidebar.devices": "Devices",
    "sidebar.printers": "Printers & Cartridges",
    "sidebar.consumables": "Consumables",
    "sidebar.reports": "Reports",
    "sidebar.notifications": "Notifications",
    "sidebar.audit_logs": "Audit Logs",
    "sidebar.settings": "Settings",
    "sidebar.logout": "Logout",
    // Settings
    "settings.title": "Settings",
    "settings.subtitle": "Control UI preferences and developer utilities.",
    "settings.general.title": "General",
    "settings.general.desc": "Language and theme preferences",
    "settings.general.language": "Language",
    "settings.general.theme": "Theme",
    "settings.api.title": "API",
    "settings.api.desc": "Configure backend API base URL and test connectivity",
    "settings.api.label": "API Base URL (override)",
    "settings.api.placeholder": "http://localhost:3001",
    "settings.api.hint": "Leave empty to use NEXT_PUBLIC_API_URL.",
    "settings.api.save": "Save",
    "settings.api.test": "Test Connection",
    "settings.api.testing": "Testing...",
    "settings.api.ok": "OK",
    "settings.api.error": "Error",
    "settings.utils.title": "Utilities",
    "settings.utils.desc": "Quick actions for development",
    "settings.utils.seed_device_types": "Create Default Device Types",
    "settings.utils.reset_ui": "Reset UI State",
    "settings.toast.api_saved": "API URL saved",
    "settings.toast.api_reset": "API URL reset to default",
    "settings.toast.api_save_failed": "Failed to save API URL",
    "settings.toast.backend_ok": "Backend reachable",
    "settings.toast.backend_fail": "Backend not reachable",
    "settings.toast.seed_ok": "Default device types created",
    "settings.toast.seed_fail": "Failed to create default device types",
    "settings.toast.ui_reset_ok": "UI state cleared",
    "settings.toast.ui_reset_fail": "Failed to reset UI state",
  },
  tr: {
    // App
    "app.name": "BT Yönetim Paneli",
    "app.tagline": "Yönetim Sistemi",

    "common.change_language": "Dili değiştir",
    "common.add": "Ekle",
    "common.edit": "Düzenle",
    "common.delete": "Sil",
    "common.cancel": "İptal",
    "common.actions": "İşlemler",
    "common.id": "ID",
    "common.department": "Departman",
    "common.name": "Ad",
    "common.export_to_excel": "Excel'e aktar",
    "common.search": "Ara",
    "common.view_details": "Detayları Gör",

    // Dashboard
    "dashboard.title": "Kontrol Paneli",
    "dashboard.subtitle": "Sistem metriklerine genel bakış",
    "dashboard.stats.total_devices": "Toplam Cihaz",
    "dashboard.stats.active_printers": "Aktif Yazıcılar",
    "dashboard.stats.employees": "Çalışanlar",
    "dashboard.stats.departments": "Departmanlar",
    "dashboard.stats.consumables": "Sarf malzemeleri",
    "dashboard.stats.alerts": "Uyarılar",
    "dashboard.stats.from_last_month": "geçen aydan",
    "dashboard.charts.device_usage_title": "Cihaz Kullanım Trendleri",
    "dashboard.charts.device_usage_desc": "Departmanlar arası aylık cihaz dağılımı",
    "dashboard.charts.cartridge_usage_title": "Kartuş Kullanım İstatistikleri",
    "dashboard.charts.cartridge_usage_desc": "Aylık kartuş tüketimi ve dolum oranları",
    "dashboard.charts.computers": "Bilgisayarlar",
    "dashboard.charts.printers": "Yazıcılar",
    "dashboard.charts.monitors": "Monitörler",
    "dashboard.charts.used": "Kullanılan",
    "dashboard.charts.refilled": "Doldurulan",
    "dashboard.charts.new": "Yeni",
    "dashboard.notifications.title": "Son Bildirimler",
    "dashboard.notifications.subtitle": "En son sistem uyarıları ve güncellemeleri",
    "dashboard.activity.title": "Son Aktivite",
    "dashboard.activity.subtitle": "Sistemde gerçekleştirilen son işlemler",
    "dashboard.activity.system": "Sistem",

    "devices.title": "Cihaz Yönetimi",
    "devices.subtitle": "Bilgisayar, monitör, yazıcı ve diğer ekipmanları yönetin",
    "devices.add": "Cihaz Ekle",
    "devices.list_title": "Cihazlar",
    "devices.list_desc": "Kuruluşunuzun IT ekipmanlarını yönetin",
    "devices.search_placeholder": "Cihaz ara...",
    "devices.type": "Tür",
    "devices.status": "Durum",
    "devices.user": "Kullanıcı",

    "departments.title": "Departman Yönetimi",
    "departments.subtitle": "Departmanları ve kaynaklarını yönetin",
    "departments.add": "Departman Ekle",
    "departments.list_title": "Departmanlar",
    "departments.list_desc": "Departmanları yönetin",
    "departments.search_placeholder": "Departman ara...",
    "departments.form.name_label": "Departman Adı",
    "departments.form.name_placeholder": "ör. Bilgi Teknolojileri",
    "departments.form.head_label": "Departman Başkanı",
    "departments.form.head_placeholder": "ör. John Smith",
    "departments.form.description_label": "Açıklama",
    "departments.form.description_placeholder": "Departmanın rolü ve sorumluluklarının kısa açıklaması",
    "departments.form.created": "Departman oluşturuldu",
    "departments.form.updated": "Departman güncellendi",
    "departments.form.save_failed": "Departman kaydedilemedi. Lütfen tekrar deneyin.",
    "departments.back_to_list": "Departmanlara Dön",
    "departments.new.title": "Yeni Departman Ekle",
    "departments.new.description": "Kuruluşunuza yeni bir departman ekleyin",
    "departments.new.info_description": "Yeni departman için ayrıntıları girin",
    "departments.edit.title": "Departmanı Düzenle",
    "departments.edit.description": "Departman bilgilerini güncelle",
    "departments.edit.back": "Departmana Dön",
    "departments.edit.info_description": "Departman ayrıntılarını güncelle",
    "departments.details.title": "Departman Detayları",
    "departments.details.description": "Departman bilgilerini görüntüle ve yönet",
    "departments.details.back": "Departmanlara Dön",
    "departments.details.load_failed": "Departman yüklenemedi",
    "departments.details.stats_title": "İstatistikler",
    "departments.details.stats_description": "Yakında",
    "departments.details.no_stats": "Bu varlık için istatistik yok.",
    "departments.info_title": "Departman Bilgileri",
    "departments.delete_confirm": "Bu departman silinsin mi?",
    "departments.deleted": "Departman silindi",
    "departments.delete_failed": "Departman silinemedi",
    "departments.export_failed": "Departmanlar dışa aktarılamadı",
    "departments.stats.total_departments": "Toplam Departman",
    "departments.stats.total_employees": "Toplam Çalışan",
    "departments.stats.total_devices": "Toplam Cihaz",
    "departments.stats.avg_employees_per_dept": "Ort. Çalışan/Departman",

    "employees.title": "Çalışan Yönetimi",
    "employees.subtitle": "Çalışanları yönetin",
    "employees.add": "Çalışan Ekle",
    "employees.list_title": "Çalışanlar",
    "employees.list_desc": "Çalışanlarınızı yönetin",
    "employees.search_placeholder": "Çalışan ara...",
    "employees.role": "Rol",

    "printers.title": "Yazıcılar & Kartuşlar",
    "printers.subtitle": "Yazıcıları ve kartuş stoğunu yönetin",
    "printers.add": "Yazıcı Ekle",
    "printers.list_title": "Yazıcılar",
    "printers.list_desc": "Yazıcıları ve konumlarını yönetin",
    "printers.search_placeholder": "Yazıcı ara...",
    "printers.model": "Model",

    "consumables.title": "Sarf Malzemeleri",
    "consumables.subtitle": "Sarf malzemelerini ve atamaları yönetin",
    "consumables.add": "Sarf Ekle",

    "notifications.title": "Bildirimler",
    "notifications.subtitle": "Sistem bildirimlerini ve uyarıları görüntüle",

    "reports.title": "Raporlar",
    "reports.subtitle": "Envanter istatistikleri ve özetler",

    "sidebar.dashboard": "Kontrol Paneli",
    "sidebar.departments": "Departmanlar",
    "sidebar.employees": "Çalışanlar",
    "sidebar.devices": "Cihazlar",
    "sidebar.printers": "Yazıcılar & Kartuşlar",
    "sidebar.consumables": "Sarf Malzemeleri",
    "sidebar.reports": "Raporlar",
    "sidebar.notifications": "Bildirimler",
    "sidebar.audit_logs": "Denetim Kayıtları",
    "sidebar.settings": "Ayarlar",
    "sidebar.logout": "Çıkış",
    // Settings
    "settings.title": "Ayarlar",
    "settings.subtitle": "Arayüz tercihlerini ve geliştirme araçlarını yönetin.",
    "settings.general.title": "Genel",
    "settings.general.desc": "Dil ve tema tercihleri",
    "settings.general.language": "Dil",
    "settings.general.theme": "Tema",
    "settings.api.title": "API",
    "settings.api.desc": "Backend API adresini yapılandırın ve bağlantıyı test edin",
    "settings.api.label": "API Temel URL (geçersiz kıl)",
    "settings.api.placeholder": "http://localhost:3001",
    "settings.api.hint": "Boş bırakılırsa NEXT_PUBLIC_API_URL kullanılır.",
    "settings.api.save": "Kaydet",
    "settings.api.test": "Bağlantıyı Test Et",
    "settings.api.testing": "Test ediliyor...",
    "settings.api.ok": "Tamam",
    "settings.api.error": "Hata",
    "settings.utils.title": "Araçlar",
    "settings.utils.desc": "Geliştirme için hızlı işlemler",
    "settings.utils.seed_device_types": "Varsayılan Cihaz Türlerini Oluştur",
    "settings.utils.reset_ui": "UI Durumunu Sıfırla",
    "settings.toast.api_saved": "API URL kaydedildi",
    "settings.toast.api_reset": "API URL varsayılana döndürüldü",
    "settings.toast.api_save_failed": "API URL kaydedilemedi",
    "settings.toast.backend_ok": "Backend erişilebilir",
    "settings.toast.backend_fail": "Backend erişilemedi",
    "settings.toast.seed_ok": "Varsayılan cihaz türleri oluşturuldu",
    "settings.toast.seed_fail": "Varsayılan cihaz türleri oluşturulamadı",
    "settings.toast.ui_reset_ok": "UI durumu temizlendi",
    "settings.toast.ui_reset_fail": "UI durumu sıfırlanamadı",
  },
  tk: {
    // App
    "app.name": "IT Dolandyryş Paneli",
    "app.tagline": "Dolandyryş Ulgamy",

    "common.change_language": "Dili üýtget",
    "common.add": "Goş",
    "common.edit": "Redaktirle",
    "common.delete": "Poz",
    "common.cancel": "Elten",
    "common.actions": "Hereketler",
    "common.id": "ID",
    "common.department": "Bölüm",
    "common.name": "Ady",
    "common.export_to_excel": "Excel-e eksport et",
    "common.search": "Gözleg",
    "common.view_details": "Jikme-jik gör",

    // Dashboard
    "dashboard.title": "Dolandyryş paneli",
    "dashboard.subtitle": "Ulgam görkezijileriniň syny",
    "dashboard.stats.total_devices": "Jemi enjam",
    "dashboard.stats.active_printers": "Işleýän printerler",
    "dashboard.stats.employees": "Işçiler",
    "dashboard.stats.departments": "Bölümler",
    "dashboard.stats.consumables": "Sarf materiallar",
    "dashboard.stats.alerts": "Duýduryşlar",
    "dashboard.stats.from_last_month": "geçen aydan",
    "dashboard.charts.device_usage_title": "Enjam ulanyş tendensiýalary",
    "dashboard.charts.device_usage_desc": "Bölümler boýunça aýlyk enjam paýlanyşy",
    "dashboard.charts.cartridge_usage_title": "Kartrij ulanyş statistikalary",
    "dashboard.charts.cartridge_usage_desc": "Aýlyk kartrij sarp we dolduryş derejesi",
    "dashboard.charts.computers": "Kompýuterler",
    "dashboard.charts.printers": "Printerler",
    "dashboard.charts.monitors": "Monitorlar",
    "dashboard.charts.used": "Ullanylan",
    "dashboard.charts.refilled": "Dolduryldy",
    "dashboard.charts.new": "Täze",
    "dashboard.notifications.title": "Soňky bildirişler",
    "dashboard.notifications.subtitle": "Iň soňky ulgam duýduryşlary we täzelikler",
    "dashboard.activity.title": "Soňky hereketler",
    "dashboard.activity.subtitle": "Ulgamda amala aşyrylan soňky hereketler",
    "dashboard.activity.system": "Ulgam",

    "devices.title": "Enjam Dolandyryşy",
    "devices.subtitle": "Kompýuterleri, monitorlary, printerleri dolandyryň",
    "devices.add": "Enjam goş",
    "devices.list_title": "Enjamlar",
    "devices.list_desc": "IT enjamlaryny dolandyryň",
    "devices.search_placeholder": "Enjam gözle...",
    "devices.type": "Görnüşi",
    "devices.status": "Statusy",
    "devices.user": "Ulanyjy",

    "departments.title": "Bölüm Dolandyryşy",
    "departments.subtitle": "Bölümleri dolandyryň",
    "departments.add": "Bölüm goş",
    "departments.list_title": "Bölümler",
    "departments.list_desc": "Bölümleri dolandyryň",
    "departments.search_placeholder": "Bölüm gözle...",
    "departments.form.name_label": "Bölümiň ady",
    "departments.form.name_placeholder": "meselem, Informatika",
    "departments.form.head_label": "Bölüm başlygy",
    "departments.form.head_placeholder": "meselem, John Smith",
    "departments.form.description_label": "Düşündiriş",
    "departments.form.description_placeholder": "Bölümiň roly we jogapkärçiligi barada gysgaça maglumat",
    "departments.form.created": "Bölüm döredildi",
    "departments.form.updated": "Bölüm täzelendi",
    "departments.form.save_failed": "Bölümi ýazmak şowsuz boldy. Gaýtadan synanyşyň.",
    "departments.back_to_list": "Bölümlere dolan",
    "departments.new.title": "Täze bölüm goş",
    "departments.new.description": "Guramaňa täze bölüm goşuň",
    "departments.new.info_description": "Täze bölüm üçin maglumatlary giriziň",
    "departments.edit.title": "Bölümü redaktirle",
    "departments.edit.description": "Bölüm maglumatlaryny täzeläň",
    "departments.edit.back": "Bölüme dolan",
    "departments.edit.info_description": "Bölümiň maglumatlaryny täzeläň",
    "departments.details.title": "Bölüm maglumatlary",
    "departments.details.description": "Bölüm maglumatlaryny gör we dolandyr",
    "departments.details.back": "Bölümlere dolan",
    "departments.details.load_failed": "Bölüm ýüklenmedi",
    "departments.details.stats_title": "Statistika",
    "departments.details.stats_description": "Ýakynda",
    "departments.details.no_stats": "Bu element üçin statistika ýok.",
    "departments.info_title": "Bölüm maglumatlary",
    "departments.delete_confirm": "Bu bölüm pozulsynmy?",
    "departments.deleted": "Bölüm pozuldy",
    "departments.delete_failed": "Bölüm pozulyp bilmedi",
    "departments.export_failed": "Bölümler eksport edilip bilinmedi",
    "departments.stats.total_departments": "Jemi bölümler",
    "departments.stats.total_employees": "Jemi işgärler",
    "departments.stats.total_devices": "Jemi enjamlary",
    "departments.stats.avg_employees_per_dept": "Ortaça işgär/bölüm",

    "employees.title": "Işçi Dolandyryşy",
    "employees.subtitle": "Işçileri dolandyryň",
    "employees.add": "Işçi goş",
    "employees.list_title": "Işçiler",
    "employees.list_desc": "Işçileri dolandyryň",
    "employees.search_placeholder": "Işçi gözle...",
    "employees.role": "Roly",

    "printers.title": "Printerler & Kartrijler",
    "printers.subtitle": "Printerleri we kartrijleri dolandyryň",
    "printers.add": "Printer goş",
    "printers.list_title": "Printerler",
    "printers.list_desc": "Printerleri dolandyryň",
    "printers.search_placeholder": "Printer gözle...",
    "printers.model": "Modeli",

    "consumables.title": "Sarf materiallary",
    "consumables.subtitle": "Sarf materiallaryny dolandyryň",
    "consumables.add": "Sarf goş",

    "notifications.title": "Bildirişler",
    "notifications.subtitle": "Sistem bildirişleri",

    "reports.title": "Hasabatlar",
    "reports.subtitle": "Statistikalar we gysgaça mazmun",

    "sidebar.dashboard": "Dolandyryş paneli",
    "sidebar.departments": "Bölümler",
    "sidebar.employees": "Işçiler",
    "sidebar.devices": "Enjamlar",
    "sidebar.printers": "Printerler & Kartrijler",
    "sidebar.consumables": "Sarf materiallary",
    "sidebar.reports": "Hasabatlar",
    "sidebar.notifications": "Bildirişler",
    "sidebar.audit_logs": "Audit žurnallary",
    "sidebar.settings": "Sazlamalar",
    "sidebar.logout": "Ulgamdan çyk",
    // Settings
    "settings.title": "Sazlamalar",
    "settings.subtitle": "UI sazlamalaryny we ösüş gurallaryny dolandyryň.",
    "settings.general.title": "Umumy",
    "settings.general.desc": "Dil we tema saýlawlary",
    "settings.general.language": "Dil",
    "settings.general.theme": "Tema",
    "settings.api.title": "API",
    "settings.api.desc": "Backend API salgyňy sazlaň we birikmäni barlaň",
    "settings.api.label": "API Esasy URL (üstünlik ber)",
    "settings.api.placeholder": "http://localhost:3001",
    "settings.api.hint": "Boş bolsa NEXT_PUBLIC_API_URL ulanylar.",
    "settings.api.save": "Sakla",
    "settings.api.test": "Birikmäni barla",
    "settings.api.testing": "Barlanylýar...",
    "settings.api.ok": "Bolýar",
    "settings.api.error": "Säwlik",
    "settings.utils.title": "Gurallar",
    "settings.utils.desc": "Ösüş üçin çalt işler",
    "settings.utils.seed_device_types": "Bellenen enjam görnüşlerini döret",
    "settings.utils.reset_ui": "UI ýagdaýyny arassala",
    "settings.toast.api_saved": "API URL saklandy",
    "settings.toast.api_reset": "API URL deslapkylara geçirildi",
    "settings.toast.api_save_failed": "API URL saklap bolmady",
    "settings.toast.backend_ok": "Backend elýeterli",
    "settings.toast.backend_fail": "Backend elýeterli däl",
    "settings.toast.seed_ok": "Bellenen enjam görnüşleri döredildi",
    "settings.toast.seed_fail": "Bellenen enjam görnüşleri döredilmedi",
    "settings.toast.ui_reset_ok": "UI ýagdaýy arassalandy",
    "settings.toast.ui_reset_fail": "UI ýagdaýyny arassalap bolmady",
  },
  ru: {
    // App
    "app.name": "Панель IT администратора",
    "app.tagline": "Система управления",

    "common.change_language": "Сменить язык",
    "common.add": "Добавить",
    "common.edit": "Изменить",
    "common.delete": "Удалить",
    "common.cancel": "Отмена",
    "common.actions": "Действия",
    "common.id": "ID",
    "common.department": "Отдел",
    "common.name": "Название",
    "common.export_to_excel": "Экспорт в Excel",
    "common.search": "Поиск",
    "common.view_details": "Подробнее",

    // Dashboard
    "dashboard.title": "Панель управления",
    "dashboard.subtitle": "Обзор системных показателей",
    "dashboard.stats.total_devices": "Всего устройств",
    "dashboard.stats.active_printers": "Активные принтеры",
    "dashboard.stats.employees": "Сотрудники",
    "dashboard.stats.departments": "Отделы",
    "dashboard.stats.consumables": "Расходники",
    "dashboard.stats.alerts": "Оповещения",
    "dashboard.stats.from_last_month": "с прошлого месяца",
    "dashboard.charts.device_usage_title": "Тренды использования устройств",
    "dashboard.charts.device_usage_desc": "Ежемесячное распределение устройств по отделам",
    "dashboard.charts.cartridge_usage_title": "Статистика использования картриджей",
    "dashboard.charts.cartridge_usage_desc": "Ежемесячное потребление и заправка картриджей",
    "dashboard.charts.computers": "Компьютеры",
    "dashboard.charts.printers": "Принтеры",
    "dashboard.charts.monitors": "Мониторы",
    "dashboard.charts.used": "Использовано",
    "dashboard.charts.refilled": "Заправлено",
    "dashboard.charts.new": "Новые",
    "dashboard.notifications.title": "Последние уведомления",
    "dashboard.notifications.subtitle": "Последние системные предупреждения и обновления",
    "dashboard.activity.title": "Последние действия",
    "dashboard.activity.subtitle": "Недавние действия в системе",
    "dashboard.activity.system": "Система",

    "devices.title": "Управление устройствами",
    "devices.subtitle": "Управляйте ПК, мониторами, принтерами и др.",
    "devices.add": "Добавить устройство",
    "devices.list_title": "Устройства",
    "devices.list_desc": "Управление IT‑оборудованием организации",
    "devices.search_placeholder": "Поиск устройств...",
    "devices.type": "Тип",
    "devices.status": "Статус",
    "devices.user": "Пользователь",

    "departments.title": "Управление отделами",
    "departments.subtitle": "Управляйте отделами и ресурсами",
    "departments.add": "Добавить отдел",
    "departments.list_title": "Отделы",
    "departments.list_desc": "Управление отделами",
    "departments.search_placeholder": "Поиск отделов...",
    "departments.form.name_label": "Название отдела",
    "departments.form.name_placeholder": "например, Информационные технологии",
    "departments.form.head_label": "Руководитель отдела",
    "departments.form.head_placeholder": "например, John Smith",
    "departments.form.description_label": "Описание",
    "departments.form.description_placeholder": "Краткое описание роли и обязанностей отдела",
    "departments.form.created": "Отдел создан",
    "departments.form.updated": "Отдел обновлен",
    "departments.form.save_failed": "Не удалось сохранить отдел. Попробуйте снова.",
    "departments.back_to_list": "Назад к отделам",
    "departments.new.title": "Добавить новый отдел",
    "departments.new.description": "Создайте новый отдел в вашей организации",
    "departments.new.info_description": "Введите данные для нового отдела",
    "departments.edit.title": "Редактировать отдел",
    "departments.edit.description": "Обновить информацию об отделе",
    "departments.edit.back": "Назад к отделу",
    "departments.edit.info_description": "Обновите данные отдела",
    "departments.details.title": "Информация об отделе",
    "departments.details.description": "Просмотр и управление информацией об отделе",
    "departments.details.back": "Назад к отделам",
    "departments.details.load_failed": "Не удалось загрузить отдел",
    "departments.details.stats_title": "Статистика",
    "departments.details.stats_description": "Скоро",
    "departments.details.no_stats": "Нет доступной статистики",
    "departments.info_title": "Информация об отделе",
    "departments.delete_confirm": "Удалить этот отдел?",
    "departments.deleted": "Отдел удалён",
    "departments.delete_failed": "Не удалось удалить отдел",
    "departments.export_failed": "Не удалось экспортировать отделы",
    "departments.stats.total_departments": "Всего отделов",
    "departments.stats.total_employees": "Всего сотрудников",
    "departments.stats.total_devices": "Всего устройств",
    "departments.stats.avg_employees_per_dept": "Средн. сотрудников/отдел",

    "employees.title": "Управление сотрудниками",
    "employees.subtitle": "Управляйте сотрудниками",
    "employees.add": "Добавить сотрудника",
    "employees.list_title": "Сотрудники",
    "employees.list_desc": "Управление сотрудниками",
    "employees.search_placeholder": "Поиск сотрудников...",
    "employees.role": "Роль",

    "printers.title": "Принтеры и картриджи",
    "printers.subtitle": "Управление принтерами и картриджами",
    "printers.add": "Добавить принтер",
    "printers.list_title": "Принтеры",
    "printers.list_desc": "Управление принтерами",
    "printers.search_placeholder": "Поиск принтеров...",
    "printers.model": "Модель",

    "consumables.title": "Расходники",
    "consumables.subtitle": "Управление расходными материалами",
    "consumables.add": "Добавить расходник",

    "notifications.title": "Уведомления",
    "notifications.subtitle": "Системные уведомления и предупреждения",

    "reports.title": "Отчеты",
    "reports.subtitle": "Статистика и сводки",

    "sidebar.dashboard": "Панель управления",
    "sidebar.departments": "Отделы",
    "sidebar.employees": "Сотрудники",
    "sidebar.devices": "Устройства",
    "sidebar.printers": "Принтеры и картриджи",
    "sidebar.consumables": "Расходники",
    "sidebar.reports": "Отчеты",
    "sidebar.notifications": "Уведомления",
    "sidebar.audit_logs": "Журнал аудита",
    "sidebar.settings": "Настройки",
    "sidebar.logout": "Выход",
    // Settings
    "settings.title": "Настройки",
    "settings.subtitle": "Управляйте параметрами интерфейса и утилитами для разработки.",
    "settings.general.title": "Общие",
    "settings.general.desc": "Язык и тема",
    "settings.general.language": "Язык",
    "settings.general.theme": "Тема",
    "settings.api.title": "API",
    "settings.api.desc": "Настройте адрес API и проверьте подключение",
    "settings.api.label": "Базовый URL API (переопределение)",
    "settings.api.placeholder": "http://localhost:3001",
    "settings.api.hint": "Оставьте пустым, чтобы использовать NEXT_PUBLIC_API_URL.",
    "settings.api.save": "Сохранить",
    "settings.api.test": "Проверить подключение",
    "settings.api.testing": "Проверка...",
    "settings.api.ok": "ОК",
    "settings.api.error": "Ошибка",
    "settings.utils.title": "Утилиты",
    "settings.utils.desc": "Быстрые действия для разработки",
    "settings.utils.seed_device_types": "Создать типы устройств по умолчанию",
    "settings.utils.reset_ui": "Сбросить состояние UI",
    "settings.toast.api_saved": "URL API сохранен",
    "settings.toast.api_reset": "URL API сброшен по умолчанию",
    "settings.toast.api_save_failed": "Не удалось сохранить URL API",
    "settings.toast.backend_ok": "Бэкенд доступен",
    "settings.toast.backend_fail": "Бэкенд недоступен",
    "settings.toast.seed_ok": "Типы устройств по умолчанию созданы",
    "settings.toast.seed_fail": "Не удалось создать типы устройств",
    "settings.toast.ui_reset_ok": "Состояние UI очищено",
    "settings.toast.ui_reset_fail": "Не удалось сбросить состояние UI",
  },
}

type I18nContextType = {
  lang: Lang
  setLang: (l: Lang) => void
  t: (key: string) => string
}

const I18nContext = createContext<I18nContextType | undefined>(undefined)

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [lang, setLang] = useState<Lang>(() => {
    if (typeof window !== "undefined") {
      return (localStorage.getItem("lang") as Lang) || "en"
    }
    return "en"
  })

  useEffect(() => {
    try {
      localStorage.setItem("lang", lang)
    } catch {}
  }, [lang])

  const t = useMemo(() => {
    const dict = dictionaries[lang] || dictionaries.en
    return (key: string) => dict[key] || dictionaries.en[key] || key
  }, [lang])

  const value = useMemo(() => ({ lang, setLang, t }), [lang, t])
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

export function useI18n() {
  const ctx = useContext(I18nContext)
  if (!ctx) throw new Error("useI18n must be used within I18nProvider")
  return ctx
}

